<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RGALAB - Health Pro</title>
<style>
  :root {
    --primary: #4CAF50;
    --bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --card-bg: rgba(255, 255, 255, 0.2);
    --text: white;
    --input-bg: white;
    --input-text: #333;
  }

  .dark-theme {
    --bg: #121212;
    --card-bg: #1e1e1e;
    --input-bg: #2d2d2d;
    --input-text: #eee;
    --text: #ffffff;
  }

  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    transition: background 0.3s ease;
  }

  .controls-wrapper {
    position: fixed;
    top: 20px;
    width: 90%;
    max-width: 550px;
    display: flex;
    justify-content: space-between;
    z-index: 1000;
    direction: ltr !important;
  }

  .switch-container {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(0,0,0,0.3);
    padding: 6px 12px;
    border-radius: 50px;
    backdrop-filter: blur(5px);
  }

  .logo-container {
    margin-top: 60px;
    margin-bottom: 10px;
    text-align: center;
  }

  .logo-container img {
    max-width: 150px;
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
  }

  .container {
    width: 100%;
    max-width: 500px;
    background: var(--card-bg);
    backdrop-filter: blur(20px);
    padding: 30px;
    border-radius: 30px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.4);
    border: 1px solid rgba(255,255,255,0.1);
  }

  input, select, button {
    width: 100%; padding: 14px; margin: 8px 0; border-radius: 12px; border: none; font-size: 16px; box-sizing: border-box;
  }

  input, select { background: var(--input-bg); color: var(--input-text); }

  button.calc-btn { background: var(--primary); color: white; font-weight: bold; cursor: pointer; margin-top: 15px; }

  .section-title { margin-top: 25px; border-bottom: 2px solid var(--primary); display: inline-block; padding-bottom: 5px; }
  .grid-results { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 15px; }
  .res-box { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; text-align: center; border: 1px solid rgba(255,255,255,0.05); }
  .res-box b { font-size: 20px; display: block; margin: 5px 0; }

  .challenge-card {
    background: linear-gradient(45deg, #FF512F, #DD2476);
    padding: 15px; border-radius: 15px; margin-top: 20px; text-align: center;
  }

  .tip-container {
    margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 12px;
    font-size: 13px; font-style: italic; border-right: 4px solid var(--primary);
  }

  .macros-grid { display: flex; justify-content: space-around; margin-top: 15px; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 15px; }
  .macro-item { text-align: center; }

  .ar-mode { direction: rtl; }
  .en-mode { direction: ltr; }
  .hidden { display: none; }

  .switch { position: relative; display: inline-block; width: 40px; height: 20px; }
  .switch input { opacity: 0; width: 0; height: 0; }
  .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #888; transition: .4s; border-radius: 34px; }
  .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background: white; transition: .4s; border-radius: 50%; }
  input:checked + .slider { background: var(--primary); }
  input:checked + .slider:before { transform: translateX(20px); }
</style>
</head>
<body class="ar-mode">

<div class="controls-wrapper">
  <div class="switch-container">
    <span style="font-size: 12px; color:white;">ğŸŒ™</span>
    <label class="switch">
      <input type="checkbox" id="themeToggle" onchange="toggleTheme()">
      <span class="slider"></span>
    </label>
  </div>
  <div class="switch-container">
    <span style="font-size: 12px; color:white;">EN</span>
    <label class="switch">
      <input type="checkbox" id="langToggle" checked onchange="toggleLanguage()">
      <span class="slider"></span>
    </label>
    <span style="font-size: 12px; color:white;">AR</span>
  </div>
</div>

<div class="logo-container">
  <img src="https://i.ibb.co/60qHqWcD/IMG-4189.png" alt="RGALAB Logo">
  <h2 id="brand-name" style="margin: 5px 0; letter-spacing: 2px;">RGALAB</h2>
</div>

<div class="container">
  <div id="challengeArea" class="challenge-card hidden">
    <small id="lbl-chall-title">ØªØ­Ø¯ÙŠ Ø§Ù„Ù€ 30 ÙŠÙˆÙ…Ø§Ù‹</small>
    <div id="chall-days" style="font-size: 22px; font-weight: bold;">Ø§Ù„ÙŠÙˆÙ… 1</div>
    <small id="lbl-chall-msg">Ø§Ø³ØªÙ…Ø±ØŒ Ø£Ù†Øª ØªØµÙ†Ø¹ Ø¨Ø·Ù„Ø§Ù‹!</small>
  </div>

  <div style="display: flex; gap: 10px;">
    <input type="number" id="weight" placeholder="Ø§Ù„ÙˆØ²Ù† (ÙƒØº)">
    <input type="number" id="height" placeholder="Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…)">
  </div>
  <input type="number" id="age" placeholder="Ø§Ù„Ø¹Ù…Ø±">

  <select id="gender">
    <option value="male" id="opt-male">Ø°ÙƒØ±</option>
    <option value="female" id="opt-female">Ø£Ù†Ø«Ù‰</option>
  </select>

  <select id="activity">
    <option value="1.2" id="act1">Ø®Ø§Ù…Ù„ (Ø¨Ø¯ÙˆÙ† ØªÙ…Ø§Ø±ÙŠÙ†)</option>
    <option value="1.375" id="act2">Ø®ÙÙŠÙ (1-3 Ø£ÙŠØ§Ù…)</option>
    <option value="1.55" id="act3">Ù…ØªÙˆØ³Ø· (3-5 Ø£ÙŠØ§Ù…)</option>
    <option value="1.725" id="act4">Ø¹Ø§Ù„ÙŠ (6-7 Ø£ÙŠØ§Ù…)</option>
  </select>

  <button class="calc-btn" onclick="processAll()" id="calcBtn">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>

  <div id="resultsArea" class="hidden">
    <div class="grid-results">
      <div class="res-box">
        <small id="lbl-bmi">Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù…</small>
        <b id="val-bmi">0</b>
        <div id="status-bmi" style="font-size: 12px; font-weight: bold; color: #ffeb3b;"></div>
      </div>
      <div class="res-box">
        <small id="lbl-fit-age">Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ</small>
        <b id="val-fit-age">0</b> 
      </div>
    </div>

    <div class="grid-results">
        <div class="res-box">
          <small id="lbl-ideal">Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ</small>
          <b id="val-ideal">0</b> 
          <small class="unit-kg">ÙƒØº</small>
        </div>
        <div class="res-box">
          <small id="lbl-water">Ø§Ø­ØªÙŠØ§Ø¬ Ø§Ù„Ù…Ø§Ø¡</small>
          <b id="val-water">0</b> 
          <small id="unit-l">Ù„ØªØ±</small>
        </div>
    </div>

    <h3 class="section-title" id="lbl-sec-cal">Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©</h3>
    <div class="grid-results">
      <div class="res-box" style="grid-column: span 2; background: rgba(76, 175, 80, 0.2);">
        <small id="lbl-maintain">Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ²Ù†</small>
        <b id="res-maintain">0</b>
      </div>
      <div class="res-box"><small id="lbl-lose">ØªÙ†Ø´ÙŠÙ (0.5ÙƒØº)</small><b id="res-lose">0</b></div>
      <div class="res-box"><small id="lbl-gain">ØªØ¶Ø®ÙŠÙ… (0.5ÙƒØº)</small><b id="res-gain">0</b></div>
    </div>

    <h3 class="section-title" id="lbl-sec-macro">ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø§ÙƒØ±ÙˆØ²</h3>
    <div class="macros-grid">
      <div class="macro-item"><span id="lbl-prot">Ø¨Ø±ÙˆØªÙŠÙ†</span><b id="val-prot">0</b><small>g</small></div>
      <div class="macro-item"><span id="lbl-carb">ÙƒØ§Ø±Ø¨</span><b id="val-carb">0</b><small>g</small></div>
      <div class="macro-item"><span id="lbl-fat">Ø¯Ù‡ÙˆÙ†</span><b id="val-fat">0</b><small>g</small></div>
    </div>

    <h3 class="section-title" id="lbl-sec-meals">ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</h3>
    <div id="meal-list"></div>

    <div class="tip-container">
        <strong id="lbl-tip">Ù†ØµÙŠØ­Ø©:</strong> <span id="val-tip"></span>
    </div>

    <button onclick="shareResults()" style="background: rgba(255,255,255,0.1); border: 1px solid white; cursor: pointer;" id="btn-share">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ğŸš€</button>
  </div>
</div>

<script>
  let lang = 'ar';
  const trans = {
    ar: {
      weight: "Ø§Ù„ÙˆØ²Ù† (ÙƒØº)", height: "Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…)", age: "Ø§Ù„Ø¹Ù…Ø±", male: "Ø°ÙƒØ±", female: "Ø£Ù†Ø«Ù‰", calc: "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
      bmi: "Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù…", water: "Ø§Ø­ØªÙŠØ§Ø¬ Ø§Ù„Ù…Ø§Ø¡", l: "Ù„ØªØ±", kg: "ÙƒØº", ideal: "Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ", fage: "Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ",
      maintain: "Ø«Ø¨Ø§Øª Ø§Ù„ÙˆØ²Ù†", lose: "Ø®Ø³Ø§Ø±Ø© ÙˆØ²Ù†", gain: "Ø²ÙŠØ§Ø¯Ø© ÙˆØ²Ù†", prot: "Ø¨Ø±ÙˆØªÙŠÙ†", carb: "ÙƒØ§Ø±Ø¨", fat: "Ø¯Ù‡ÙˆÙ†", tip: "Ù†ØµÙŠØ­Ø©",
      act1: "Ø®Ø§Ù…Ù„ (Ø¨Ø¯ÙˆÙ† ØªÙ…Ø§Ø±ÙŠÙ†)", act2: "Ø®ÙÙŠÙ (1-3 Ø£ÙŠØ§Ù…)", act3: "Ù…ØªÙˆØ³Ø· (3-5 Ø£ÙŠØ§Ù…)", act4: "Ø¹Ø§Ù„ÙŠ (6-7 Ø£ÙŠØ§Ù…)",
      meals: ["Ø¥ÙØ·Ø§Ø±", "ØºØ¯Ø§Ø¡", "Ø¹Ø´Ø§Ø¡", "Ø³Ù†Ø§Ùƒ"], status: ["Ù†Ø­Ø§ÙØ©", "ÙˆØ²Ù† Ù…Ø«Ø§Ù„ÙŠ", "ÙˆØ²Ù† Ø²Ø§Ø¦Ø¯", "Ø³Ù…Ù†Ø©"],
      calText: "Ø³Ø¹Ø±Ø©", secCal: "Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©", secMacro: "ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø§ÙƒØ±ÙˆØ²", secMeals: "ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª",
      share: "Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ğŸš€", challTitle: "ØªØ­Ø¯ÙŠ Ø§Ù„Ù€ 30 ÙŠÙˆÙ…Ø§Ù‹", day: "Ø§Ù„ÙŠÙˆÙ…",
      tips: ["Ø§Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡ Ù‚Ø¨Ù„ Ø§Ù„ÙˆØ¬Ø¨Ø©.", "Ø§Ù„Ù†ÙˆÙ… Ø§Ù„ÙƒØ§ÙÙŠ ÙŠØ­Ø±Ù‚ Ø§Ù„Ø¯Ù‡ÙˆÙ†.", "Ø§Ù„Ù…Ø´ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØºØ¯Ø§Ø¡ Ù…ÙÙŠØ¯."]
    },
    en: {
      weight: "Weight (kg)", height: "Height (cm)", age: "Age", male: "Male", female: "Female", calc: "Analyze Data",
      bmi: "BMI Index", water: "Daily Water", l: "Liters", kg: "kg", ideal: "Ideal Weight", fage: "Fitness Age",
      maintain: "Maintenance", lose: "Weight Loss", gain: "Weight Gain", prot: "Protein", carb: "Carbs", fat: "Fats", tip: "Tip",
      act1: "Sedentary (no exercise)", act2: "Lightly Active (1-3 days)", act3: "Moderately Active (3-5 days)", act4: "Very Active (6-7 days)",
      meals: ["Breakfast", "Lunch", "Dinner", "Snack"], status: ["Underweight", "Normal", "Overweight", "Obese"],
      calText: "kcal", secCal: "Calories Estimate", secMacro: "Macros Distribution", secMeals: "Meal Plan",
      share: "Share Results ğŸš€", challTitle: "30-Day Challenge", day: "Day",
      tips: ["Drink water before meals.", "Good sleep burns fat.", "Walk after lunch."]
    }
  };

  function toggleLanguage() {
    lang = document.getElementById('langToggle').checked ? 'ar' : 'en';
    document.body.className = lang === 'ar' ? 'ar-mode' : 'en-mode';
    updateTexts();
    if(!document.getElementById('resultsArea').classList.contains('hidden')) processAll();
  }

  function toggleTheme() { document.body.classList.toggle('dark-theme'); }

  function updateTexts() {
    const t = trans[lang];
    document.getElementById('weight').placeholder = t.weight;
    document.getElementById('height').placeholder = t.height;
    document.getElementById('age').placeholder = t.age;
    document.getElementById('opt-male').innerText = t.male;
    document.getElementById('opt-female').innerText = t.female;
    document.getElementById('act1').innerText = t.act1;
    document.getElementById('act2').innerText = t.act2;
    document.getElementById('act3').innerText = t.act3;
    document.getElementById('act4').innerText = t.act4;
    document.getElementById('calcBtn').innerText = t.calc;
    document.getElementById('lbl-bmi').innerText = t.bmi;
    document.getElementById('lbl-ideal').innerText = t.ideal;
    document.getElementById('lbl-water').innerText = t.water;
    document.getElementById('unit-l').innerText = t.l;
    document.querySelectorAll('.unit-kg').forEach(el => el.innerText = t.kg);
    document.getElementById('lbl-maintain').innerText = t.maintain;
    document.getElementById('lbl-lose').innerText = t.lose;
    document.getElementById('lbl-gain').innerText = t.gain;
    document.getElementById('lbl-prot').innerText = t.prot;
    document.getElementById('lbl-carb').innerText = t.carb;
    document.getElementById('lbl-fat').innerText = t.fat;
    document.getElementById('lbl-sec-cal').innerText = t.secCal;
    document.getElementById('lbl-sec-macro').innerText = t.secMacro;
    document.getElementById('lbl-sec-meals').innerText = t.secMeals;
    document.getElementById('lbl-tip').innerText = t.tip + ":";
    document.getElementById('btn-share').innerText = t.share;
    document.getElementById('lbl-fit-age').innerText = t.fage;
    document.getElementById('lbl-chall-title').innerText = t.challTitle;
  }

  function processAll() {
    const w = parseFloat(document.getElementById('weight').value);
    const h = parseFloat(document.getElementById('height').value);
    const a = parseFloat(document.getElementById('age').value);
    const g = document.getElementById('gender').value;
    const act = parseFloat(document.getElementById('activity').value);

    if(!w || !h || !a) return;

    // Challenge Logic
    let startDate = localStorage.getItem('rgashowDate');
    if(!startDate) {
        startDate = new Date().getTime();
        localStorage.setItem('rgashowDate', startDate);
    }
    let diff = Math.floor((new Date().getTime() - startDate) / (1000*60*60*24)) + 1;
    if(diff > 30) diff = 30;
    document.getElementById('chall-days').innerText = trans[lang].day + " " + diff;
    document.getElementById('challengeArea').classList.remove('hidden');

    // BMI
    const bmi = (w / ((h/100)**2)).toFixed(1);
    document.getElementById('val-bmi').innerText = bmi;
    let stIndex = bmi < 18.5 ? 0 : bmi < 25 ? 1 : bmi < 30 ? 2 : 3;
    document.getElementById('status-bmi').innerText = trans[lang].status[stIndex];

    // Fitness Age
    let fage = a;
    if(bmi > 25) fage += (bmi - 25);
    if(act < 1.4) fage += 5; else fage -= 3;
    document.getElementById('val-fit-age').innerText = Math.round(fage);

    // Ideal & Water
    let ideal = g === 'male' ? 50 + 2.3 * ((h/2.54) - 60) : 45.5 + 2.3 * ((h/2.54) - 60);
    document.getElementById('val-ideal').innerText = Math.round(ideal);
    document.getElementById('val-water').innerText = (w * 0.033).toFixed(1);

    // Calories
    let bmr = (10*w) + (6.25*h) - (5*a) + (g === 'male' ? 5 : -161);
    let maint = Math.round(bmr * act);
    const unit = " " + trans[lang].calText;
    document.getElementById('res-maintain').innerText = maint + unit;
    document.getElementById('res-lose').innerText = (maint - 500) + unit;
    document.getElementById('res-gain').innerText = (maint + 500) + unit;

    // Macros & Meals
    let p = w * 2, f = (maint * 0.25) / 9, c = (maint - (p*4) - (f*9)) / 4;
    document.getElementById('val-prot').innerText = Math.round(p);
    document.getElementById('val-fat').innerText = Math.round(f);
    document.getElementById('val-carb').innerText = Math.round(c);

    const m = trans[lang].meals;
    document.getElementById('meal-list').innerHTML = `
      <div style="display:flex; justify-content: space-between; padding: 5px 0;"><span>${m[0]}</span> <b>${Math.round(maint*0.25)}${unit}</b></div>
      <div style="display:flex; justify-content: space-between; padding: 5px 0;"><span>${m[1]}</span> <b>${Math.round(maint*0.4)}${unit}</b></div>
      <div style="display:flex; justify-content: space-between; padding: 5px 0;"><span>${m[2]}</span> <b>${Math.round(maint*0.35)}${unit}</b></div>
    `;

    document.getElementById('val-tip').innerText = trans[lang].tips[Math.floor(Math.random() * 3)];
    document.getElementById('resultsArea').classList.remove('hidden');
  }

  function shareResults() {
    const text = `RGALAB: My daily calories are ${document.getElementById('res-maintain').innerText}! Check your health at RGALAB.`;
    navigator.clipboard.writeText(text).then(() => alert(lang === 'ar' ? "ØªÙ… Ø§Ù„Ù†Ø³Ø®!" : "Copied!"));
  }

  window.onload = updateTexts;
</script>
</body>
</html>
